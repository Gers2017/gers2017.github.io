---
import Layout from "../layouts/Layout.astro";
import BlogPreview from "../components/BlogPreview.astro";

const my_posts = await Astro.glob("./posts/*.md");
const posts = my_posts.sort(
    (a, b) =>
        new Date(b.frontmatter.postdate).valueOf() -
        new Date(a.frontmatter.postdate).valueOf()
);
---

<Layout
    title={"Hello Gers Blog"}
    description={"blog about computer science, nerd stuff and tech"}
>
    <div class="grid">
        <ul class="column">
            {
                posts.map(({ url, frontmatter }) => (
                    <BlogPreview
                        title={frontmatter.title}
                        description={frontmatter.description}
                        postdate={frontmatter.postdate}
                        url={url!}
                    />
                ))
            }
        </ul>
    </div>
</Layout>

<style>
    .grid {
        display: grid;
        grid-template-columns: 1fr 2fr 1fr;
    }

    ul {
        padding-left: 0;
        grid-column: 2 / 3;
    }

    /* On Mobile */
    @media only screen and (max-width: 768px) {
        .grid {
            grid-template-columns: 1fr;
        }

        ul {
            grid-column: 1 / 2;
        }
    }
</style>
